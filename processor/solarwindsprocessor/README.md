# SolarWinds Processor

<!-- distribution links hack -->
[verified]: https://github.com/solarwinds/solarwinds-otel-collector-releases#verified
[playground]: https://github.com/solarwinds/solarwinds-otel-collector-releases#playground
[k8s]: https://github.com/solarwinds/solarwinds-otel-collector-releases#k8s


<!-- status autogenerated section -->
| Status        |           |
| ------------- |-----------|
| Stability     | [development]: metrics, logs, traces   |
| Distributions | [k8s], [playground], [verified] |
| Issues        | [![Open issues](https://img.shields.io/github/issues-search/solarwinds/solarwinds-otel-collector-contrib?query=is%3Aissue%20is%3Aopen%20label%3Aprocessor%2Fsolarwinds%20&label=open&color=orange&logo=opentelemetry)](https://github.com/solarwinds/solarwinds-otel-collector-contrib/issues?q=is%3Aopen+is%3Aissue+label%3Aprocessor%2Fsolarwinds) [![Closed issues](https://img.shields.io/github/issues-search/solarwinds/solarwinds-otel-collector-contrib?query=is%3Aissue%20is%3Aclosed%20label%3Aprocessor%2Fsolarwinds%20&label=closed&color=blue&logo=opentelemetry)](https://github.com/solarwinds/solarwinds-otel-collector-contrib/issues?q=is%3Aclosed+is%3Aissue+label%3Aprocessor%2Fsolarwinds) |

[development]: https://github.com/open-telemetry/opentelemetry-collector/blob/main/docs/component-stability.md#development
[k8s]: https://github.com/open-telemetry/opentelemetry-collector-releases/tree/main/distributions/otelcol-k8s
[playground]: 
[verified]: 
<!-- end autogenerated section -->

## Overview
SolarWinds processor modifies OTEL signals (metrics, logs, traces) to enhance SolarWinds Observability experience.

## Features
- **Host Attributes Decoration**: Detects and decorates telemetry with host identification
- **Resource Attributes**: Decorates signals with configured resource attributes  
- **Signal Size Monitoring**: Warns when signals exceed size limits

## Host Attributes Decoration

Processor detects host information and decorates telemetry with appropriate host attributes if enabled.

The example configuration below enables host attributes decoration.

```yaml
host_attributes_decoration:
  enabled: true
  on_prem_override_id: "custom-host-id"
```

Where:
- `enabled`: Enables host attributes decoration, disabled by default
- `on_prem_override_id`: Sets a custom override ID for on-premises environments. If not stated on on-premises environments,
  the processor will use the BIOS UUID.

### Affected attributes:
- `host.id`: Unique host identifier, affected by host ID priority rules and cloud-specific handling or running inside container
- `host.name`: Hostname of the host if cloud provider is AWS and run in containerd
- `os.type`: Operating system type will be normalized to `Windows` or `Linux`

### Host ID Priority
1. Cloud-specific handling (AWS, GCP)
2. Configured `on_prem_override_id`
3. BIOS UUID from incoming telemetry (`host.bios-uuid`)
4. `host.id` from incoming telemetrys


## Resource Attributes
Processor decorates signals with configured resource attributes. These attributes are added to all incoming signals and
will overwrite existing attributes with the same key. Resource attributes will owerwrite attributes added by the
host attributes decoration. Resource attributes are optional.

```yaml
resource:
    custom.attribute: "value"
```

## Signal Size Monitoring
Processor monitors the size of incoming signals and logs a warning if any signal exceeds the configured maximum size

```yaml
max_size_mib: 3
```

Where:
- `max_size_mib`: Maximum allowed size of a single signal in MiB, default is 2 MiB

## Configuration

### Minimal Configuration
```yaml
processors:
  solarwinds:
    extension: solarwinds/sample
```

### Full Configuration
```yaml
processors:
  solarwinds:
    extension: solarwinds/sample
    max_size_mib: 3
    host_attributes_decoration:
      enabled: true
      on_prem_override_id: "custom-host-id"
    resource:
      custom.attribute: "value"
```

## Extension Dependency
Requires `solarwinds` extension to be configured. The processor automatically adds:
- `sw.otelcol.collector.name`: configured collector name
- `sw.otelcol.collector.entity_creation`: (optional) if `entity_creation` is enabled in the extension the SolarWinds OTel Collector entity will be inferred in SolarWinds Observability.

> [!WARNING]
> Exact name of extension is required in processor configuration. In case when `solarwinds` extension is misconfigured in processor setup, collector will not start.
