# SolarWinds Processor

<!-- distribution links hack -->
[verified]: https://github.com/solarwinds/solarwinds-otel-collector-releases#verified
[playground]: https://github.com/solarwinds/solarwinds-otel-collector-releases#playground
[k8s]: https://github.com/solarwinds/solarwinds-otel-collector-releases#k8s


<!-- status autogenerated section -->
| Status        |           |
| ------------- |-----------|
| Stability     | [development]: metrics, logs, traces   |
| Distributions | [k8s], [playground], [verified] |
| Issues        | [![Open issues](https://img.shields.io/github/issues-search/solarwinds/solarwinds-otel-collector-contrib?query=is%3Aissue%20is%3Aopen%20label%3Aprocessor%2Fsolarwinds%20&label=open&color=orange&logo=opentelemetry)](https://github.com/solarwinds/solarwinds-otel-collector-contrib/issues?q=is%3Aopen+is%3Aissue+label%3Aprocessor%2Fsolarwinds) [![Closed issues](https://img.shields.io/github/issues-search/solarwinds/solarwinds-otel-collector-contrib?query=is%3Aissue%20is%3Aclosed%20label%3Aprocessor%2Fsolarwinds%20&label=closed&color=blue&logo=opentelemetry)](https://github.com/solarwinds/solarwinds-otel-collector-contrib/issues?q=is%3Aclosed+is%3Aissue+label%3Aprocessor%2Fsolarwinds) |

[development]: https://github.com/open-telemetry/opentelemetry-collector/blob/main/docs/component-stability.md#development
[k8s]: https://github.com/open-telemetry/opentelemetry-collector-releases/tree/main/distributions/otelcol-k8s
[playground]: 
[verified]: 
<!-- end autogenerated section -->

## Overview
SolarWinds processor adjusts OTel signals (metrics, logs, traces) to improve SolarWinds Observability experience.

## Features
- Collector attributes decoration: configures collector-specific attributes `sw.otelcol.collector.name` and `sw.otelcol.collector.entity_creation`. This ensures collector entity with appropriate name gets created in SolarWinds Observability SaaS platform
- Host attributes decoration: determines and applies host identifiers and related attributes for proper host entity creation in SolarWinds Observability SaaS platform
- Resource attributes: adds optional configured attributes to all signals
- Signal size monitoring: logs a warning when signals exceed configured size

## Configuration

### Minimal Configuration
```yaml
processors:
  solarwinds:
    collector_attributes_decoration:
      extension: solarwinds/sample
```

### Full Configuration
```yaml
processors:
  solarwinds:
    max_size_mib: 3
    collector_attributes_decoration:
      enabled: true
      extension: solarwinds/sample
    host_attributes_decoration:
      enabled: true
      on_prem_override_id: "custom-host-id"
    resource:
      custom.attribute: "value"
```

## Collector Attributes Decoration

Processor provides collector-specific decorations leveraging of configured `solarwinds` extension.
This feature is enabled by default.

```yaml
collector_attributes_decoration:
  enabled: true
  extension: solarwinds/sample
```

Where:
- `enabled`: Enables collector attributes decoration (enabled by default)
- `extension`: Identifies a SolarWinds Extension by its full name for obtaining required configuration

> [!WARNING]
> Exact name of the extension is required in processor configuration. If the `solarwinds` extension is misconfigured in the processor setup, the collector will not start.

The processor automatically adds:
- `sw.otelcol.collector.name`: configured collector name
- `sw.otelcol.collector.entity_creation`: (optional) when entity inference is enabled in the extension, the SolarWinds OTel Collector entity will be inferred in SolarWinds Observability.

## Host Attributes Decoration

Processor detects host information and decorates telemetry with host attributes when enabled.

The example configuration below enables host attributes decoration.

```yaml
host_attributes_decoration:
  enabled: true
  on_prem_override_id: "custom-host-id"
```

Where:
- `enabled`: Enables host attributes decoration (disabled by default)
- `on_prem_override_id`: Fallback host ID for onâ€‘premises environments. When provided, it has precedence over BIOS UUID.

### Affected attributes:
- `host.id`: Unique host identifier. Resolution follows the priority rules below and may also be adjusted based on cloud environment and containerization.
- `host.name`: On AWS when running in containerd, replaced with the container ID to align with other monitoring components.
- `os.type`: Normalized to `Windows` or `Linux` (anything not equal to Windows becomes `Linux`).

### Host ID Priority
1. Cloud-specific handling (AWS, GCP)
2. Configured `on_prem_override_id`
3. BIOS UUID from incoming telemetry (`host.bios-uuid`)
4. `host.id` from incoming telemetry


## Resource Attributes
Processor decorates signals with configured resource attributes. These are applied to all incoming signals and overwrite existing attributes with the same key. Resource attributes also take precedence over attributes added by host attributes decoration. Resource attributes are optional.

```yaml
resource:
    custom.attribute: "value"
```

## Signal Size Monitoring
Processor monitors the size of incoming signals, and logs a warning if any signal exceeds the configured maximum size.

```yaml
max_size_mib: 3
```

Where:
- `max_size_mib`: Maximum allowed size of a single signal in MiB (default: 2 MiB)
