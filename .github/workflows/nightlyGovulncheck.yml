name: "Nightly govulncheck"

on:
  push:
    branches: [ "chore/add-govulncheck" ]
  pull_request:
    branches: [ "chore/add-govulncheck" ]
  schedule:
    - cron: '*/1 * * * *'

jobs:
    nightly-vulncheck-modules:
        runs-on: ubuntu-latest
        env:
          SLACK_CHANNEL: "C02698MU18D"
          NIGHTHAWK_TEST_REPORT: ${{ secrets.NIGHTHAWK_TEST_REPORT }}
          GH_TOKEN_READ_SOLARWINDS: ${{ secrets.GH_TOKEN_READ_SOLARWINDS }}
        steps:
            - name: Checkout
              uses: actions/checkout@v4
              with:
                  submodules: true
            - name: Go vulnerabilities check
              run: |
                  make ci-vulncheck-nightly-modules title="SolarWinds Otel Collector Contrib Vulnerabilities (Public)" 2>&1
