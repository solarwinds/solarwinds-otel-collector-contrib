# Contributing

Thank you for your interest in contributing to SolarWinds OpenTelemetry Collector Contrib!

If you are a SolarWinds contributor, we recommend that you work on this repository directly from [private releases repository](https://github.com/solarwinds-cloud/solarwinds-otel-collector-releases). You can use the preconfigured [devcontainer](https://github.com/solarwinds-cloud/solarwinds-otel-collector-releases/tree/main/.devcontainer) configuration, for out of the box development experience, usefull make commands, and custom copilot instructions and prompts.

## Before Adding a New Component

Before proposing or implementing a new OpenTelemetry component, please consider the following:

### Evaluate Necessity
- **Is a new component truly needed?** Many telemetry transformation requirements can be solved using existing components, especially with processors like [transform](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/transformprocessor), [filter](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/filterprocessor), or [metricstransform](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/metricstransformprocessor).
- Review the [current components list](README.md#components) and the [OpenTelemetry Collector Contrib repository](https://github.com/open-telemetry/opentelemetry-collector-contrib) to avoid duplication.

### Contact Us First
- For SolarWinds internal contributors: Reach out in the `#platform-agents` Slack channel to discuss your proposal.
- For external contributors: Open an issue describing your use case and proposed component before investing significant time in development.

Before any code is written contact us providing the following information:
* Who's the sponsor for your component. A sponsor is an approver or maintainer who will be the official reviewer of the code and a code owner for the component.
* Some information about your component, such as the reasoning behind it, use-cases, telemetry data types supported, and anything else you think is relevant for us.
* The configuration options your component will accept. This will give us a better understanding of what it does, and how it may be implemented.

### Register Telemetry Names
If your component introduces new metrics, you must register them. For details on the registration process, please contact us directly.

## Adding new components

### Component Structure

All SolarWinds OTel components follow the OpenTelemetry standard structure with metadata-driven code generation.

### Steps
1. Create `metadata.yaml`, `doc.go`, `go.mod` and `README.md` in component directory. See details for each of them below.
2. Install mdatagen in root `make install-mdatagen`
3. In the component directory, run `mdatagen ./manifest.yaml` to create generated files:
    - `internal/metadata/generated_*.go` - Type-safe metadata accessors
    - `generated_component_test.go` - Lifecycle tests
    - `generated_package_test.go` - Package-level tests
    - `documentation.md`
    - Updates README.md status section
4. Implement factory, config, and component logic
5. Add unit tests and update CHANGELOG.md
6. (post merge and post release) Add component to distribution [manifest.yaml](https://github.com/solarwinds-cloud/solarwinds-otel-collector-releases/blob/main/distributions/verified/manifest.yaml)

#### Metadata File (`metadata.yaml`)

Defines component type, stability, distributions, and optional metrics/attributes. See [metadata schema](https://github.com/open-telemetry/opentelemetry-collector/blob/main/cmd/mdatagen/metadata-schema.yaml).

#### Package Documentation (`doc.go`)

Must contain the `//go:generate` directive for metadata generation:

```go
//go:generate mdatagen metadata.yaml

package componentname
```

#### README Template

Include autogeneration markers for status table.
The status table between markers is auto-generated by `mdatagen ./manifest.yaml`.
The distribution hack is our way of overriding the opentelemetry links in the autogenerated section with our own links.

```markdown
# Component Name
<!-- distribution links hack -->
[verified]: https://github.com/solarwinds/solarwinds-otel-collector-releases#verified
[playground]: https://github.com/solarwinds/solarwinds-otel-collector-releases#playground
[k8s]: https://github.com/solarwinds/solarwinds-otel-collector-releases#k8s

<!-- status autogenerated section -->
<!-- end autogenerated section -->
```

### Naming Conventions

**Component type names:**
- Use lowercase, no separators: `hostinfo`, `swok8sdiscovery`
- Prefix SolarWinds-specific components: `swo*` or `swok8s*`

**Go package names:**
- Match component type name: `package hostinfoprocessor`
- Add component class suffix: `processor`, `receiver`, etc.

**Directory structure:**
```
{receiver|processor|exporter|extension}/
  componentname/
    metadata.yaml
    doc.go
    README.md
    config.go
    factory.go
    component.go
    internal/
      metadata/          # Generated files
        generated_*.go
```
