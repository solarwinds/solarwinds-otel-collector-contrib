# Results of SolarWinds Entity Connector

This document contains overview of Logs format generated by the SolarWinds Entity Connector.
Each event is represented by individual log record. One event can be tied to entity or relationship,
and carry event type such as update or deletion.

## Event Logs
The SolarWinds Entity Connector generates resource logs that contain event logs and relationship logs as
log records. 

- There can be multiple log records in a single resource log with different
entity types, different even type (update/delete), etc. 
- All mentioned entity types, relationship types
and attributes must match to definitions in SWO. 
- Body of the log record is empty, all required information is stored in attributes.

```json
{
  "resourceLogs": [
    {
      "resource": {},
      "scopeLogs": [
        {
          "scope": {
            "attributes": [
              {
                "key": "otel.entity.event_as_log",
                "value": {
                  "boolValue": true
                }
              }
            ]
          },
          "logRecords": [
            {
              "tip": "see entity log event below"
            },
            {
              "tip": "see relationship log event below"
            }
          ]
        }
      ]
    }
  ]
}
```

## Entity Log Event
The SolarWinds Entity Connector generates logs in the format below. The event types are:
- `entity_state` for update events
- `entity_delete` for deletion events. Optionally, in this case we can set type of the delete action. 
Use attribute `otel.entity.delete.type` can have one of the following values:
  - `set_unknown` (default and can be skipped)
  - `soft_delete`

```json
{
  "observedTimeUnixNano": "...",
  "body": {},
  "attributes": [
    {
      "key": "otel.entity.type",
      "value": {
        "stringValue": "<entity-type>"
      }
    },
    {
      "key": "otel.entity.id",
      "value": {
        "kvlistValue": {
          "values": [
            {
              "key": "<attribute-name>",
              "value": {
                "stringValue": "<attribute-value>"
              }
            }
          ]
        }
      }
    },
    {
      "key": "otel.entity.event.type",
      "value": {
        "stringValue": "entity_state"
      }
    }
  ]
}
```

## Relationship Log Event
The SolarWinds Entity Connector generates logs in the format below. The event types are:
- `entity_relationship_state` for update events
- `entity_relationship_delete` for deletion events

```json
{
  "observedTimeUnixNano": "...",
  "body": {},
  "attributes": [
    {
      "key": "otel.entity_relationship.source_entity.id",
      "value": {
        "kvlistValue": {
          "values": [
            {
              "key": "<attribute-name>",
              "value": {
                "stringValue": "<attribute-value>"
              }
            }
          ]
        }
      }
    },
    {
      "key": "otel.entity_relationship.destination_entity.id",
      "value": {
        "kvlistValue": {
          "values": [
            {
              "key": "<attribute-name>",
              "value": {
                "stringValue": "<attribute-value>"
              }
            }
          ]
        }
      }
    },
    {
      "key": "otel.entity_relationship.type",
      "value": {
        "stringValue": "<relationship-type>"
      }
    },
    {
      "key": "otel.entity_relationship.source_entity.type",
      "value": {
        "stringValue": "<entity-type>"
      }
    },
    {
      "key": "otel.entity_relationship.destination_entity.type",
      "value": {
        "stringValue": "<entity-type>"
      }
    },
    {
      "key": "otel.entity.event.type",
      "value": {
        "stringValue": "entity_relationship_state"
      }
    }
  ]
}

```
Note: `traceId`, `spanId` are omited for simplicity in presented jsons.